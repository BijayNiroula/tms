<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- Styles -->
<style>
    #chartdiv {
        width: 100%;
        height: 500px;
    }
</style>

<body>



    <!-- HTML -->
    <div id="chartdiv"></div>
</body>

<?php

$breed = ['Male Dog', 'Female Dog', 'Total Dogs', 'Healthy Dogs', 'Sick Dogs'];
$count = [100, 150, 200, 100, 50];
?>


</html>

<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- Chart code -->
<script>
    var breed = <?php echo json_encode($breed); ?>;
    console.log(breed);
    var count = <?php echo json_encode($count); ?>;
    console.log(count);

    am4core.ready(function() {
        // Disable the amCharts logo
        am4core.addLicense("CHARTJS"); // This will remove the logo from appearing
        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end
        var chart = am4core.create("chartdiv", am4charts.PieChart3D);
        chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
        // Dynamically create chart data from breed and count arrays
        var chartData = breed.map(function(b, index) {
            return {
                country: b,
                litres: count[index]
            };
        });

        chart.data = chartData;

        var series = chart.series.push(new am4charts.PieSeries3D());
        series.dataFields.value = "litres";
        series.dataFields.category = "country";

        // Modify the labels to show breed and count instead of percentage
        series.labels.template.text = "{category}=> {value}";
        // Remove percentage from labels (default behavior)
        series.slices.template.tooltipText = "{category}: {value}";
        // Optionally, remove the legend if needed
        // chart.legend = null;
        // Define a color palette (can be any valid CSS colors)
        var colorPalette = ["#FF5733", "#33FF57", "#3357FF", "#FFD700", "#8A2BE2", "#FF6347", "#B0E0E6"];

        // Dynamically assign colors to each slice based on the index of the chart data
        series.colors.list = chartData.map(function(item, index) {
            return am4core.color(colorPalette[index % colorPalette.length]); // Loop through colors if more slices than colors
        });


    }); // end am4core.ready()
</script>
